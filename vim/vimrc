"no arrow key
noremap <Up> <Nop>
noremap <Down> <Nop>
noremap <Left> <Nop>
noremap <Right> <Nop>

set encoding=utf-8

"set ruler at columns
set colorcolumn=80,120
highlight ColorColumn ctermbg=0 guibg=236 ctermbg=236

"hightlight current line
set cursorline

"define ctrl-s to explore via nerdtree
nnoremap <C-s> :NERDTreeToggle<cr>

"define leader
let mapleader=","

" shortcut to open config files
nmap <Leader>rc :e ~/.dotfiles/vim/vimrc<cr>
nmap <Leader>pl :e ~/.dotfiles/nvim/vim-plug/plugins.vim<cr>

noremap <Leader>c :bd<cr>
noremap <Leader>w :w<cr>
noremap <Leader>n :enew<cr>
noremap <bs> daw

" alt+j (mac) to move line up
nnoremap º :m .+1<CR>==
nnoremap <A-j> :m .+1<CR>==

" alt+k (mac) to move line down
nnoremap ∆ :m .-2<CR>==
nnoremap <A-k> :m .-2<CR>==

"set cursor to line in insert mode and to block in normal mode
let &t_SI = "\<Esc>Ptmux;\<Esc>\<Esc>]50;CursorShape=1\x7\<Esc>\\"
let &t_SR = "\<Esc>Ptmux;\<Esc>\<Esc>]50;CursorShape=2\x7\<Esc>\\"
let &t_EI = "\<Esc>Ptmux;\<Esc>\<Esc>]50;CursorShape=0\x7\<Esc>\\"

"cursor should change quickly
set ttimeout
set ttimeoutlen=1
set listchars=tab:>-,trail:~,extends:>,precedes:<,space:.
set ttyfast

"colors
:highlight MatchParen cterm=underline ctermbg=black ctermfg=NONE
:highlight Pmenu ctermbg=darkgray guibg=darkgray
:highlight PmenuSel ctermbg=gray guibg=gray ctermfg=0
highlight ALEWarning ctermbg=238

set clipboard+=unnamed
set number
set backspace=indent,eol,start

" autocompletion
set complete+=kspell
set completeopt=menu,preview

"highlight search keywords
set hlsearch

"display keywords immedeately
set incsearch

"dehighlight keywords
nmap <Leader><space> :nohlsearch<cr>

"search will be case-sensitive if it contains an uppercase letter
set ignorecase
set smartcase

filetype indent plugin on
set expandtab
set tabstop=4
set softtabstop=4
set shiftwidth=4
set smartindent
set autoindent

" turn on indenting for php
autocmd FileType php setlocal smartindent autoindent indentexpr=""

" *.ss should be handled as html
au BufRead,BufNewFile *.ss set filetype=ss
autocmd BufNewFile,BufRead *.ss set syntax=html

" *.blade should be handled as html
au BufRead,BufNewFile *.blade.php set filetype=blade
autocmd BufNewFile,BufRead *.blade.php set syntax=html

syntax enable

set path+=**
set wildmenu

" relative/hybrid line numbers
set number relativenumber
set nu rnu

" macros
nnoremap <Leader>da F dt=xda"
nnoremap fit vito<esc>

"tab switching with leader<num>
noremap <Leader>1 1gt
noremap <Leader>2 2gt
noremap <Leader>3 3gt
noremap <Leader>4 4gt
noremap <Leader>5 5gt
noremap <Leader>6 6gt
noremap <Leader>7 7gt
noremap <Leader>8 8gt
noremap <Leader>9 9gt
noremap <Leader>0 :tabnew<cr>
noremap <c-l> :tabnext<cr>
noremap <c-h> :tabprev<cr>

noremap <s-l> :bnext<cr>
noremap <s-h> :bprevious<cr>

" phpactor keys
noremap <Leader>u :PhpactorImportClass<cr>
noremap <Leader>e :PhpactorClassExpand<cr>
noremap <Leader>o :PhpactorGotoDefinition tabnew<cr>
noremap <Leader>mm :PhpactorContextMenu<cr>

" snippet keys
let g:UltiSnipsExpandTrigger="<tab>"
let g:UltiSnipsJumpForwardTrigger="<tab>"
let g:UltiSnipsJumpBackwardTrigger="<c-c>"
let g:UltiSnipsSnippetDirectories=[$HOME.'/.dotfiles/vim/snippets']

" remaping for german keyboard
set langmap=^`,#',ö\\;,&^

" fzf settings
nnoremap <c-p> :FZF<cr>
let g:fzf_layout = { 'window': { 'width': 0.9, 'height': 0.6, 'relative': v:true, 'yoffset': 0 } }

" ale settings
let g:ale_linters_explicit = 1
let g:ale_linters = {'php': ['phpcs']}
let g:ale_php_phpcs_standard = 'psr12'

" close nerdtree after opening file
let NERDTreeQuitOnOpen=1
